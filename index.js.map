{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `   \n      <li class=\"gallery-card\">\n      <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\"><img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" /></a>       \n        <div class=\"gallery-info\">\n            <p class=\"info-item\">Likes: <span class=\"span-info-item\">${imgInfo.likes}</span></p>\n            <p class=\"info-item\">Views: <span class=\"span-info-item\">${imgInfo.views}</span></p>\n            <p class=\"info-item\">Comments: <span class=\"span-info-item\">${imgInfo.comments}</span></p>\n            <p class=\"info-item\">Downloads: <span class=\"span-info-item\">${imgInfo.downloads}</span></p>\n        </div>\n      </li>\n    `;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchedQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: '48309790-79d41aaa998d6ec4cf76c4434',\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n  try {\n    return axios.get('https://pixabay.com/api/', axiosOptions);\n  } catch (error) {\n    console.log(error);\n  }\n};\n","import { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loaderEl = document.querySelector('.loader');\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\n\nlet page = 1;\nlet searchedQuery = '';\n\nconst showLoader = () => {\n  loaderEl.style.display = 'block';\n};\n\nconst hideLoader = () => {\n  loaderEl.style.display = 'none';\n};\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  try {\n    searchedQuery = event.currentTarget.elements.user_query.value.trim();\n    if (searchedQuery === '') {\n      iziToast.error({\n        message: 'The field must be filled in!',\n      });\n      return;\n    }\n\n    page = 1;\n    loadMoreBtnEl.classList.add('is-hidden');\n    showLoader();\n    const { data } = await fetchPhotosByQuery(searchedQuery, page);\n    hideLoader();\n    console.log(searchedQuery);\n    console.log(data);\n    if (data.totalHits === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      galleryEl.innerHTML = '';\n      searchFormEl.reset();\n      return;\n    }\n    if (data.totalHits > 15) {\n      loadMoreBtnEl.classList.remove('is-hidden');\n      loadMoreBtnEl.removeEventListener('click', onLoadMoreBtnClick);\n      loadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n    galleryEl.innerHTML = galleryTemplate;\n    lightbox.refresh();\n    searchFormEl.reset();\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nlet lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n    const cardHeight =\n      galleryEl.firstElementChild.getBoundingClientRect().height;\n\n    loadMoreBtnEl.classList.add('is-hidden');\n    showLoader();\n    const { data } = await fetchPhotosByQuery(searchedQuery, page);\n    hideLoader();\n    loadMoreBtnEl.classList.remove('is-hidden');\n    const galleryTemplate = data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n    lightbox.refresh();\n\n    window.scrollBy({\n      top: cardHeight * 6,\n      behavior: 'smooth',\n    });\n\n    const totalPages = Math.ceil(data.totalHits / 15);\n    if (page >= totalPages) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n    hideLoader();\n  }\n};\n"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","error","loaderEl","searchFormEl","galleryEl","loadMoreBtnEl","page","showLoader","hideLoader","onSearchFormSubmit","event","iziToast","data","onLoadMoreBtnClick","galleryTemplate","el","lightbox","SimpleLightbox","cardHeight","totalPages"],"mappings":"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"}